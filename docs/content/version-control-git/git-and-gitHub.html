

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Git and GitHub &mdash; Today I Learnt  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Git Command Line Reference" href="git-command-line-reference.html" />
    <link rel="prev" title="Commit Messages Guide" href="commit-messages-guide.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Today I Learnt
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../cs-and-web-concepts/cs-and-web-concepts.html">CS &amp; Web Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cs-and-web-concepts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.html">计算机网络</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cs-and-web-concepts/dns.html">DNS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cs-and-web-concepts/%E7%A7%91%E6%8A%80%E8%8B%B1%E8%AF%AD.html">科技英语</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cs-and-web-concepts/front-end-and-its-history.html">Front-end and its history</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cs-and-web-concepts/cors.html">CORS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cs-and-web-concepts/how-the-web-works.html">How the Web works</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algorithms-and-data-structure/algorithms-and-data-structure.html">Algorithms and Data Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algorithms-and-data-structure/books.html">一些算法书籍</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operating-system/operating-system.html">Operating System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operating-system/linux-details.html">Linux Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operating-system/linux-common-orders.html">Linux Common Orders</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operating-system/arch-system-maintenance.html">Arch System Maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operating-system/arch-package.html">Arch Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operating-system/arch-software-installation-and-usage.html">Arch Software Installation and Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operating-system/arch-installation-guide.html">Arch Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operating-system/openbsd-installation.html">OpenBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operating-system/ubuntu-backup.html">Ubuntu Backup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operating-system/ubuntu-common-usage.html">Ubuntu Common Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operating-system/ubuntu-install-software.html">Install Software on Ubuntu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operating-system/ubuntu-problems.html">Problems on Ubuntu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operating-system/mxlinux-installation.html">MX Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../html/html.html">HTML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../html/before-html.html">Before HTML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../html/html-basics.html">HTML Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../html/images.html">Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="../html/html-code-snippets.html">HTML Code Snippets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../css/css.html">CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../css/css-basics.html">CSS Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../css/css-box.html">CSS Box</a></li>
<li class="toctree-l1"><a class="reference internal" href="../css/css-position.html">CSS Position</a></li>
<li class="toctree-l1"><a class="reference internal" href="../css/css-code-snippets.html">CSS Code Snippets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../javascript/javascript.html">JavaScript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../javascript/es6.html">ES6</a></li>
<li class="toctree-l1"><a class="reference internal" href="../javascript/what-i-learnt-from-js.html">What I learnt from JS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../javascript/install-node-npm-yarn.html">Install Node.js, NPM and Yarn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../javascript/yarn-v2-usage.html">Yarn v2 Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../javascript/used-packages-from-npm-or-yarn.html">Used Packages from npm or yarn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../javascript/the-difference-between-js-in-head-and-body.html">The difference between js in the head and body</a></li>
<li class="toctree-l1"><a class="reference internal" href="../javascript/js-code-snippets.html">JS Code Snippets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vue/vue.html">Vue</a></li>
<li class="toctree-l1"><a class="reference internal" href="../front-end.html">Front-end</a></li>
<li class="toctree-l1"><a class="reference internal" href="../programming-languages/programming-language.html">Programming Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../programming-languages/shell.html">Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../programming-languages/python.html">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../programming-languages/go.html">Go</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects/projects.html">Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects/wordpress.html">WordPress</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/tools.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/docker.html">Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/vagrant.html">Vagrant</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/gpg.html">title: GPG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/gpg.html#can-not-change-name-or-comment-without-losing-signatures">Can Not Change Name Or Comment Without Losing Signatures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/gpg.html#import-github-key">Import GitHub Key</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/jekyll.html">title: Jekyll</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/jekyll.html#setup-jekyll-environment">Setup Jekyll Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/jekyll.html#jekyll-error-building-page-related-to-kramdown-parser">Jekyll Error Building Page Related To Kramdown Parser</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/jekyll.html#use-bundler-2-or-greater-with-this-lockfile">Use Bundler 2 Or Greater With This Lockfile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/hugo.html">title: Hugo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/hugo.html#install-hugo-on-ubuntu">Install Hugo On Ubuntu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/hugo.html#hugo-server-bind-ip">Hugo Server Bind IP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/hugo.html#use-new-archetype-create-post-in-posts-folder">Use New Archetype Create Post In Posts Folder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/neovim.html">neovim</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/cloudflare.html">Cloudflare</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/gatsby.html">title: Gatsby</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/gatsby.html#change-default-package-manager">Change Default Package Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/gatsby.html#set-up-development-environment">Set Up Development Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="version-control-git.html">Version Control - Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="git-fundamentals.html">Git Fundamentals</a></li>
<li class="toctree-l1"><a class="reference internal" href="git-commit.html">Git Commit</a></li>
<li class="toctree-l1"><a class="reference internal" href="commit-messages-guide.html">Commit Messages Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Git and GitHub</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">工作流</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ci">CI</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#api">API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#show-diff">Show Diff</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#problems">Problems</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="git-command-line-reference.html">Git Command Line Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="git-glossary.html">Git Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="useful-tips-about-git.html">Useful Tips about Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="branch-name-contain-the-space-char.html">Branch Name Contain The ‘space’ Char</a></li>
<li class="toctree-l1"><a class="reference internal" href="create-empty-branch-locally-and-remotely.html">Create Empty Branch Locally And Remotely</a></li>
<li class="toctree-l1"><a class="reference internal" href="delete-a-git-branch-both-locally-and-remotely.html">Delete A Git Branch Both Locally And Remotely</a></li>
<li class="toctree-l1"><a class="reference internal" href="delete-all-local-and-remote-tags.html">Delete All Local And Remote Tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="delete-commit.html">Delete Commit</a></li>
<li class="toctree-l1"><a class="reference internal" href="merge-two-git-repo.html">Merge Two Git Repo</a></li>
<li class="toctree-l1"><a class="reference internal" href="remove-tracking-branches-no-longer-on-remote.html">Remove Tracking Branches No Longer On Remote</a></li>
<li class="toctree-l1"><a class="reference internal" href="update-with-original-repo-after-forking-on-github.html">Update With Original Repo After Forking on GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="git-clone-specify-branch.html">Git Clone Specify Branch</a></li>
<li class="toctree-l1"><a class="reference internal" href="github-action-only-generate-nojekyll.html">GitHub Action only Generate <code class="docutils literal notranslate"><span class="pre">.nojekyll</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../useful-info.html">Useful Info</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hardware/hardware.html">Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hardware/bluetooth.html">Bluetooth</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hardware/power-supply-unit.html">Power supply unit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hardware/raspberry-pi.html">Raspberry Pi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learning-how-to-learn.html">Learning How to Learn</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Today I Learnt</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Git and GitHub</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/content/version-control-git/git-and-gitHub.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="git-and-github">
<h1>Git and GitHub<a class="headerlink" href="#git-and-github" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2>工作流<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="section" id="ci">
<h3>CI<a class="headerlink" href="#ci" title="Permalink to this headline">¶</a></h3>
<p>在 Github Actions 出来之前，比较流行的开源 CI 服务分别是 <a class="reference external" href="https://circleci.com/">CircleCI</a> 以及 <a class="reference external" href="https://travis-ci.org/">TravisCI</a>。之前也有一些项目使用过这些第三方服务，但给人的体验都不是很好例如构建缓慢。特别是对于国内用户来说访问它们的资源实在是太慢了，并且它们自身的功能也存在一点缺失。</p>
<p><strong>Github Actions</strong></p>
<p>接下来让我们看看应用要如何接入 <a class="reference external" href="https://docs.github.com/cn/free-pro-team&#64;latest/actions">Github Actions</a>
以 <a class="reference external" href="https://github.com/zhangyuang/create-ssr-app">create-ssr-app</a> 为例</p>
<p><strong>创建配置文件</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mkdir -p .github/workflows
$ touch .github/workflows/CI.yaml
</pre></div>
</div>
<p><strong>监听 Git 命令</strong></p>
<p>在 push 代码 以及 合并 PR 的时候触发 CI 工作</p>
<div class="highlight-yml notranslate"><div class="highlight"><pre><span></span>name: CI

# Controls when the action will run. Triggers the workflow on push or pull request
# events but only for the dev branch
on:
  push:
    branches: [dev, master]
  pull_request:
    branches: [dev, master]
</pre></div>
</div>
<p><strong>添加构建环境</strong></p>
<p>这里推荐使用 build matix 来确保我们的应用可以在多个操作系统，多个语言版本中成功构建</p>
<div class="highlight-yml notranslate"><div class="highlight"><pre><span></span>strategy:
    matrix:
      os: [ubuntu-latest, macos-latest, windows-latest]
      node: [&quot;12&quot;, &quot;13&quot;, &quot;14&quot;]
name: install - ${{ matrix.os }} - ${{ matrix.node }}
runs-on: ${{ matrix.os }}
</pre></div>
</div>
<p><strong>定义 job</strong></p>
<p>我们的构建一般都包含多个任务，github 可以并行的执行这些任务来提升构建速度，并且可以指定任务之间的依赖关系</p>
<div class="highlight-yml notranslate"><div class="highlight"><pre><span></span>jobs:
  install: # 定义安装依赖的任务
    if: &quot;!contains(github.event.head_commit.message, &#39;skip ci&#39;) &amp;&amp; !contains(github.event.head_commit.message, &#39;.md&#39;)&quot; # 如果 commit 信息包含以下关键字则跳过该任务
    strategy: # 分别在三个操作系统的三种 Node.js 环境中运行任务
        matrix:
          os: [ubuntu-latest, macos-latest, windows-latest]
          node: [&quot;12&quot;, &quot;13&quot;, &quot;14&quot;]
    name: install - ${{ matrix.os }} - ${{ matrix.node }}
    runs-on: ${{ matrix.os }}
    steps:
      - uses: actions/checkout@v2
      - name: Use Node.js
        uses: actions/setup-node@v1
        with:
          node-version: ${{ matrix.node }}
      - name: restore # 恢复之前缓存的依赖
        uses: actions/cache@v2
        with:
          path: |
            node_modules
            */*/node_modules
          key: ${{ runner.os }}-${{ hashFiles(&#39;**/package.json&#39;) }} # 依赖缓存的 key 当 package.json 内容变动时丢弃缓存 也可以使用 package-lock.json or yarn.lock
          restore-keys: |
            ${{ runner.os }}-${{ matrix.node-version }}-nodemodules-
      - name: Install dependencies # 安装依赖
        run: |
          yarn
</pre></div>
</div>
<p>测试 和 lint 任务需要依赖 install 任务执行完毕后才可以执行。但这两个任务之间没有依赖关系，可以并行的运行</p>
<div class="highlight-yml notranslate"><div class="highlight"><pre><span></span>test:
    needs: install
    strategy:
        matrix:
          os: [ubuntu-latest, macos-latest, windows-latest]
          node: [&quot;12&quot;, &quot;13&quot;, &quot;14&quot;]
    name: test - ${{ matrix.os }} - ${{ matrix.node }}
    runs-on: ${{ matrix.os }}
    steps:
      - uses: actions/checkout@v2
      - name: Use Node.js
        uses: actions/setup-node@v1
        with:
          node-version: ${{ matrix.node }}
      - name: Load node_modules
        uses: actions/cache@v2
        with:
          path: |
            node_modules
            */*/node_modules
          key: ${{ runner.os }}-${{ hashFiles(&#39;**/package.json&#39;) }}
      - run: yarn test # 执行测试并生成覆盖率，这里一般都是接入 codecov 服务，需要配置 CODECOV_TOKEN 环境变量才能够上传
  lint:
    needs: install
    strategy:
        matrix:
          os: [ubuntu-latest, macos-latest, windows-latest]
          node: [&quot;12&quot;, &quot;13&quot;, &quot;14&quot;]
    name: lint - ${{ matrix.os }} - ${{ matrix.node }}
    runs-on: ${{ matrix.os }}
    steps:
      - uses: actions/checkout@v2
      - name: Use Node.js
        uses: actions/setup-node@v1
        with:
          node-version: ${{ matrix.node }}
      - name: Load node_modules
        uses: actions/cache@v2
        with:
          path: |
            node_modules
            */*/node_modules
          key: ${{ runner.os }}-${{ hashFiles(&#39;**/package.json&#39;) }}
      - run: yarn lint
</pre></div>
</div>
<p><strong>构建产物并上传</strong></p>
<p>我们的应用的运行代码通常是用构建工具 如 tsc|babel|webpack 来生成的。但是我们提交到 github 的只有源代码。在这里我们在 CI 中进行构建任务后，需要将构建的产物上传。否则下一个发布任务将无法获得构建任务生成后的目录文件</p>
<div class="highlight-yml notranslate"><div class="highlight"><pre><span></span>build:
  needs: [lint, test]
  strategy:
      matrix:
        os: [ubuntu-latest, macos-latest, windows-latest]
        node: [&quot;12&quot;, &quot;13&quot;, &quot;14&quot;]
  name: build - ${{ matrix.os }} - ${{ matrix.node }}
  runs-on: ${{ matrix.os }}
  steps:
    - uses: actions/checkout@v2
    - name: Use Node.js
      uses: actions/setup-node@v1
      with:
        node-version: ${{ matrix.node }}
    - name: Load node_modules
      uses: actions/cache@v2
      with:
        path: |
          node_modules
          */*/node_modules
        key: ${{ runner.os }}-${{ hashFiles(&#39;**/package.json&#39;) }}
    - run: yarn build # 执行构建
    - name: Upload artifact # 上传构建产物，这里我们的源码目录是 src，而实际运行的代码是构建后的 bin 目录
      uses: actions/upload-artifact@v2
      with:
        name: build_output
        path: bin # 上传 bin 目录
</pre></div>
</div>
<p><strong>发布到 NPM</strong></p>
<p>这里不需要使用到 matrix, 我们只需要在一个环境发布即可。发布功能依赖一些环境变量，我们需要创建 NPM_TOKEN 环境变量</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ npm token create
</pre></div>
</div>
<p>在 github 项目主页添加环境变量</p>
<a class="reference external image-reference" href="https://res.wx.qq.com/op_res/fIHeA-ZVJ229K_xpIR2QiyVyH3ZTwtKqmQzM_e6AVZHXAxRw2q1qlWHrmqJ20xhP"><img alt="" src="https://res.wx.qq.com/op_res/fIHeA-ZVJ229K_xpIR2QiyVyH3ZTwtKqmQzM_e6AVZHXAxRw2q1qlWHrmqJ20xhP" /></a>
<div class="highlight-yml notranslate"><div class="highlight"><pre><span></span>publish:
  name: Publish
  runs-on: ubuntu-latest
  needs: [build]
  steps:
    - uses: actions/checkout@v2
    - name: Setup node
      uses: actions/setup-node@v1
      with:
        node-version: 12
    - name: Download artifacts # 下载之前上传的构建产物
      uses: actions/download-artifact@v2
      with:
        name: build_output
        path: bin
    - name: Publish
      run: | # 只有 commit 信息包含版本号的提交才进行发布，否则不需要发布。这里我们可以使用 lerna publish/version 或者 npm version 来进行发布
        if git log -1 --pretty=%B | grep &quot;^[0-9]\+\.[0-9]\+\.[0-9]\+$&quot;;
        then
          echo &quot;//registry.npmjs.org/:_authToken=$NPM_TOKEN&quot; &gt;&gt; ~/.npmrc
          npm publish
        else
          echo &quot;Not a release, skipping publish&quot;
        fi
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        NPM_TOKEN: ${{ secrets.NPM_TOKEN }}
</pre></div>
</div>
<p>以上的步骤都做完后，当执行 <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">version</span> <span class="pre">patch</span></code> 命令来生成版本后推送到仓库便会自动帮你执行构建发布流程</p>
<a class="reference external image-reference" href="https://res.wx.qq.com/op_res/A2UVQnCR7s9y5uggqAWM2NK-V6PJOMpSKY7wA7aGKZ2GZUD123KVykc7yk8UGbmo"><img alt="" src="https://res.wx.qq.com/op_res/A2UVQnCR7s9y5uggqAWM2NK-V6PJOMpSKY7wA7aGKZ2GZUD123KVykc7yk8UGbmo" /></a>
</div>
</div>
<div class="section" id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://api.github.com/">https://api.github.com/</a></p>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="section" id="show-diff">
<h3>Show Diff<a class="headerlink" href="#show-diff" title="Permalink to this headline">¶</a></h3>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">- var GITHUB_ISSUES_LINK = &quot;https://api.github.com/repos/nelsontky/gh-pages-url-shortener-db/issues/&quot;;</span>
<span class="gi">+ var GITHUB_ISSUES_LINK = &quot;https://api.github.com/repos/${your name}/${your db repo}/issues/&quot;;</span>
</pre></div>
</div>
<p><a class="reference external" href="https://github.com/mayandev/gh-short-url#before-use">source</a></p>
</div>
</div>
<div class="section" id="problems">
<h2>Problems<a class="headerlink" href="#problems" title="Permalink to this headline">¶</a></h2>
<ol class="loweralpha simple">
<li><p>[[GitHub Action only Generate .nojekyll]]</p></li>
<li></li>
</ol>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ bash bootstrap.sh
Cloning into <span class="s1">&#39;/home/tianheg/.vim&#39;</span>...
fatal: unable to access <span class="s1">&#39;https://github.com/carlhuda/janus.git/&#39;</span>: gnutls_handshake<span class="o">()</span> failed: The TLS connection was non-properly terminated.
Could not clone the repository to /home/tianheg/.vim
</pre></div>
</div>
<p>This error means that Git cannot establish a secure connection to the server you’re trying to use. Your version of Git uses the GnuTLS library to set up TLS (encrypted) connections, and for some reason that setup process is failing.</p>
<p>This could be for a couple of reasons. One is that your server (which one you haven’t mentioned) is using an incompatible set of cipher suites or TLS versions, and there’s no encryption algorithms in common that can be chosen. It’s also possible that you have someone tampering with the connection via a MITM device.</p>
<p>The version of Git and GnuTLS you’re using should work just fine with most standard servers. Re-installing it won’t help. You can try upgrading to a newer version of Debian, or you can try building Git yourself against a version of libcurl using OpenSSL. You can also just switch to SSH-based remotes, which will avoid this incompatibility altogether.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>Cloning into <span class="s1">&#39;/home/tianheg/.vim/janus/vim/colors/base16-vim&#39;</span>...
fatal: unable to access <span class="s1">&#39;https://github.com/chriskempson/base16-vim.git/&#39;</span>: gnutls_handshake<span class="o">()</span> failed: Error <span class="k">in</span> the pull <span class="k">function</span>.
</pre></div>
</div>
<hr class="docutils" />
<p>ref:</p>
<ol class="arabic simple">
<li><p><a class="reference external" href="https://github.community/t/unable-to-push-to-repo-gnutls-handshake-failed/885/19">https://github.community/t/unable-to-push-to-repo-gnutls-handshake-failed/885/19</a></p></li>
<li><p><a class="reference external" href="https://askubuntu.com/a/1009764">https://askubuntu.com/a/1009764</a></p></li>
</ol>
<ol class="loweralpha simple" start="3">
<li></li>
</ol>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ gh auth refresh -s read:public_key

Post <span class="s2">&quot;https://github.com/login/device/code&quot;</span>: <span class="nb">read</span> tcp <span class="m">192</span>.168.43.2:51274-&gt;140.82.113.4:443: read: connection reset by peer
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="git-command-line-reference.html" class="btn btn-neutral float-right" title="Git Command Line Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="commit-messages-guide.html" class="btn btn-neutral float-left" title="Commit Messages Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Jim Gao.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>